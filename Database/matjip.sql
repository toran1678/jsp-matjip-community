/*
DB Type: MYSQL
DB Version: 8.0
DB Name: MatJip
DB Host: localhost:3307
DB User: root
*/
# CREATE DATABASE MatJip;
USE MatJip;

DROP TABLE IF EXISTS `post_images`;
DROP TABLE IF EXISTS `likes`;
DROP TABLE IF EXISTS `comments`;
DROP TABLE IF EXISTS `posts`;

/*
Table Name: users (사용자 정보 테이블)
user_id:   사용자 고유 ID
username:  사용자 이름
email:     사용자 이메일
user_pw:  사용자 비밀번호
created_at:  사용자 가입 날짜
*/
DROP TABLE IF EXISTS `users`;
CREATE TABLE users (
  user_id INT AUTO_INCREMENT PRIMARY KEY,
  username VARCHAR(50) NOT NULL,
  email VARCHAR(100) NOT NULL UNIQUE,
  user_pw VARCHAR(100) NOT NULL,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

/*
Table Name: posts (게시물 정보 테이블)
post_id:   게시물 고유 ID
user_id:   게시물 작성자 ID
title:     게시물 제목
content:   게시물 내용
location:  게시물 위치
store_name: 게시물 가게 이름
food_type:  게시물 음식 종류
created_at: 게시물 작성 날짜
updated_at: 게시물 수정 날짜
*/
DROP TABLE IF EXISTS `posts`;
CREATE TABLE posts (
  post_id INT AUTO_INCREMENT PRIMARY KEY,
  user_id INT NOT NULL,
  title VARCHAR(255) NOT NULL,
  content TEXT NOT NULL,
  location VARCHAR(100) NOT NULL,
  store_name VARCHAR(100) NOT NULL,
  food_type VARCHAR(50),
  x DOUBLE, -- 위도
  y DOUBLE, -- 경도
  imagePath VARCHAR(255),
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  FOREIGN KEY (user_id) REFERENCES users(user_id) ON DELETE CASCADE
);

/*
Table Name: comments (댓글 정보 테이블)
comment_id: 댓글 고유 ID
post_id:   댓글이 달린 게시물 ID
user_id:   댓글 작성자 ID
content:   댓글 내용
created_at: 댓글 작성 날짜
*/
DROP TABLE IF EXISTS `comments`;
CREATE TABLE comments (
  comment_id INT AUTO_INCREMENT PRIMARY KEY,
  post_id INT NOT NULL,
  user_id INT NOT NULL,
  content TEXT NOT NULL,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (post_id) REFERENCES posts(post_id) ON DELETE CASCADE,
  FOREIGN KEY (user_id) REFERENCES users(user_id) ON DELETE CASCADE
);

/*
Table Name: likes (좋아요 정보 테이블)
like_id:   좋아요 고유 ID
post_id:   좋아요가 달린 게시물 ID
user_id:   좋아요 작성자 ID
created_at: 좋아요 작성 날짜
*/
DROP TABLE IF EXISTS `likes`;
CREATE TABLE likes (
  like_id INT AUTO_INCREMENT PRIMARY KEY,
  post_id INT NOT NULL,
  user_id INT NOT NULL,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (post_id) REFERENCES posts(post_id) ON DELETE CASCADE,
  FOREIGN KEY (user_id) REFERENCES users(user_id) ON DELETE CASCADE
);

-- 더미 데이터

INSERT INTO users (username, email, user_pw) VALUES
('홍길동', 'hong@test.com', '1234'),
('김철수', 'kim@test.com', '1234'),
('이영희', 'lee@test.com', '1234'),
('김토란', 'test2@test.com', '1234'),
('맛잘알', 'test4@test.com', '1234'),
('침착이', 'test5@test.com', '1234');

DROP TABLE IF EXISTS `post_images`;
CREATE TABLE post_images (
    image_id INT AUTO_INCREMENT PRIMARY KEY,
    post_id INT NOT NULL,
    image_path VARCHAR(255) NOT NULL,
    upload_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (post_id) REFERENCES posts(post_id) ON DELETE CASCADE
);

INSERT INTO posts (user_id, title, content, location, store_name, food_type, x, y) VALUES
(4, '안양 타코 맛집', '타코 쫀맛집!!', '경기도 안양시 만안구 병목안로 187-1', '로렌스 타코', '양식', 126.922, 37.388),
(4, '인천 냉면 끝판왕', '그냥 찢었다.', '인천 연수구 샘터로 22', '조왕냉면', '한식', 126.643, 37.408),
(4, '딸기 케이크 찐맛집', '딸기 과즙 팡팡!', '경기 안양시 만안구 냉천로 158', '시아케이크', '카페/디저트', 126.926, 37.387),
(3, '송도 중식의 자존심', '짬뽕 국물이 끝내줘요', '인천 연수구 송도동 26-1', '송도짬뽕', '중식', 126.634, 37.379),
(3, '연남동 우동 명가', '일본식 육수 깊이 있음', '서울 마포구 연남동 239-5', '미소우동', '일식', 126.923, 37.561),
(5, '청담동 파스타 맛집', '크림 파스타 찐함', '서울 강남구 청담동 88-8', '로마의 식탁', '양식', 127.043, 37.525),
(5, '분식 천국', '떡볶이랑 김밥은 여기지', '서울 강서구 마곡중앙로 161', '신당떡볶이', '분식', 126.826, 37.562),
(6, '전주 비빔밥 명가', '전통 그대로 비빔밥', '전북 전주시 완산구 경기전길 165', '한옥비빔밥', '한식', 127.149, 35.815),
(6, '카페 추천 - 브런치 최고', '브런치+커피 감성카페', '서울 성동구 성수이로 32길 15', '카페호미', '카페/디저트', 127.055, 37.544),
(7, '부산 해산물 맛집', '회, 조개구이 모두 완벽', '부산 수영구 민락동 181-93', '민락횟집', '기타', 129.117, 35.158),
(4, '성수동 소금빵 맛집', '소금빵이 진짜 소금빵이다.', '서울 성동구 연무장5길 20', '성수빵집', '카페/디저트', 127.0557, 37.5445),
(5, '강릉 초당 순두부 찐맛', '맑고 깊은 국물, 건강해짐', '강원 강릉시 초당순두부길 73', '초당골 순두부', '한식', 128.9151, 37.7843),
(3, '홍대 숯불갈비 1등집', '양념도 맛있고 불맛도 짱', '서울 마포구 와우산로 94', '홍대갈비', '한식', 126.9241, 37.5556),
(6, '부산 밀면 맛집', '시원한 육수가 여름 최고', '부산 동구 범일로 85', '부산밀면', '한식', 129.057, 35.1345),
(7, '이태원 터키 케밥', '가성비, 양 모두 최고!', '서울 용산구 이태원로 190', '이스탄불 케밥', '양식', 126.994, 37.534),
(3, '동작구 혼밥 추천', '동작구 혼밥 추천 후기입니다. 분위기 좋고 음식 맛있어요!', '광주 동구 문화전당로 38', '맛찬들', '한식', 127.648353, 36.012832),
(7, '고양시 숨은 맛집', '고양시 숨은 맛집 후기입니다. 분위기 좋고 음식 맛있어요!', '서울 동작구 상도로 369', '디저트하우스', '일식', 127.942585, 35.761563),
(2, '포항시 현지 느낌', '포항시 현지 느낌 후기입니다. 분위기 좋고 음식 맛있어요!', '경남 창원시 마산회원구 3·15대로 178', '비빔당', '중식', 128.336334, 36.022344),
(1, '수원시 혼밥 추천', '수원시 혼밥 추천 후기입니다. 분위기 좋고 음식 맛있어요!', '울산 남구 삼산로 261', '분식왕', '기타', 127.659479, 35.197187),
(2, '천안시 감성카페', '천안시 감성카페 후기입니다. 분위기 좋고 음식 맛있어요!', '대구 수성구 무학로 123', '대게나라', '기타', 128.093812, 37.082621),
(2, '고양시 찐맛집', '고양시 찐맛집 후기입니다. 분위기 좋고 음식 맛있어요!', '서울 강남구 삼성로 508', '비빔당', '중식', 128.772753, 35.341649),
(2, '제주시 가성비 최고', '제주시 가성비 최고 후기입니다. 분위기 좋고 음식 맛있어요!', '충남 천안시 동남구 만남로 43', '현지포차', '양식', 126.58952, 36.428419),
(3, '목포시 가성비 최고', '목포시 가성비 최고 후기입니다. 분위기 좋고 음식 맛있어요!', '광주 동구 문화전당로 38', '비스트로1988', '분식', 127.361202, 36.68776),
(4, '천안시 가족 외식', '천안시 가족 외식 후기입니다. 분위기 좋고 음식 맛있어요!', '경기 고양시 덕양구 중앙로 1175', '터키소반', '분식', 129.167168, 35.78953),
(7, '수성구 감성카페', '수성구 감성카페 후기입니다. 분위기 좋고 음식 맛있어요!', '서울 동작구 상도로 369', '대게나라', '기타', 127.956713, 35.917164),
(1, '동작구 가족 외식', '동작구 가족 외식 후기입니다. 분위기 좋고 음식 맛있어요!', '인천 미추홀구 경인로 203', '정통우동', '중식', 127.126983, 37.164633),
(3, '포항시 혼밥 추천', '포항시 혼밥 추천 후기입니다. 분위기 좋고 음식 맛있어요!', '강원 춘천시 금강로 68', '비스트로1988', '분식', 126.661703, 35.391093),
(6, '동구 가성비 최고', '동구 가성비 최고 후기입니다. 분위기 좋고 음식 맛있어요!', '전남 목포시 영산로 123', '맛찬들', '카페/디저트', 128.106087, 35.368929),
(2, '춘천시 찐맛집', '춘천시 찐맛집 후기입니다. 분위기 좋고 음식 맛있어요!', '충북 청주시 상당구 상당로 94', '대게나라', '한식', 127.58994, 37.050199),
(3, '도움5로 가족 외식', '도움5로 가족 외식 후기입니다. 분위기 좋고 음식 맛있어요!', '인천 미추홀구 경인로 203', '비스트로1988', '분식', 126.969563, 36.400191),
(1, '유성구 가족 외식', '유성구 가족 외식 후기입니다. 분위기 좋고 음식 맛있어요!', '서울 마포구 월드컵북로 396', '현지포차', '일식', 128.716129, 37.401505),
(3, '남구 현지 느낌', '남구 현지 느낌 후기입니다. 분위기 좋고 음식 맛있어요!', '경북 포항시 북구 중앙로 262', '분식왕', '양식', 126.772679, 36.333491),
(4, '춘천시 현지 느낌', '춘천시 현지 느낌 후기입니다. 분위기 좋고 음식 맛있어요!', '경남 창원시 마산회원구 3·15대로 178', '대게나라', '중식', 126.54068, 36.447516),
(7, '수원시 재방문 의사 있음', '수원시 재방문 의사 있음 후기입니다. 분위기 좋고 음식 맛있어요!', '인천 미추홀구 경인로 203', '서울떡볶이', '기타', 127.146877, 37.559552),
(1, '포항시 가성비 최고', '포항시 가성비 최고 후기입니다. 분위기 좋고 음식 맛있어요!', '충남 천안시 동남구 만남로 43', '서울떡볶이', '일식', 128.790563, 37.634388);

-- 카테고리: 한식, 중식, 일식, 양식, 분식, 카페/디저트, 기타
INSERT INTO comments (post_id, user_id, content) VALUES
-- 1. 안양 타코 맛집
(1, 2, '타코 진짜 찐이에요. 또 가고 싶어요!'),
(1, 3, '여기 분위기도 좋아요~'),
-- 2. 인천 냉면 끝판왕
(2, 1, '비냉, 물냉 다 맛있어요. 국물이 예술'),
(2, 4, '여름마다 생각나는 맛집이에요!'),
-- 3. 딸기 케이크 찐맛집
(3, 2, '딸기 진짜 싱싱하고 케이크도 촉촉해요'),
(3, 5, '비주얼 대박이에요. 인스타 감성!!'),
-- 4. 송도 중식의 자존심
(4, 1, '짬뽕 국물 시원~함 그 자체'),
(4, 3, '짜장도 꽤 괜찮았어요.'),
-- 5. 연남동 우동 명가
(5, 4, '면이 탱탱하고 국물이 깊어요'),
(5, 2, '혼밥하기 좋은 조용한 곳이에요.'),
-- 6. 청담동 파스타 맛집
(6, 1, '크림파스타 너무 부드럽고 고소해요'),
(6, 3, '양은 살짝 아쉬운데 맛은 최고'),
-- 7. 분식 천국
(7, 5, '떡볶이 국물이 아주 찐해요!'),
(7, 2, '김밥 속도 꽉 차 있고 맛있어요'),
-- 8. 전주 비빔밥 명가
(8, 4, '비빔장이 너무 맛있어요. 전통 느낌'),
(8, 1, '반찬 구성도 좋고 가성비 굿'),
-- 9. 카페 추천 - 브런치 최고
(9, 3, '브런치 메뉴 구성이 탄탄해요'),
(9, 5, '아보카도 샌드 강추입니다~'),
-- 10. 부산 해산물 맛집
(10, 1, '민락횟집은 진리죠. 신선해요!'),
(10, 4, '조개구이도 같이 먹으면 좋아요'),
-- 11. 성수동 소금빵 맛집
(11, 2, '겉바속촉 소금빵, 여기 찐이에요'),
(11, 5, '줄 서서 먹을만했어요'),
-- 12. 강릉 초당 순두부 찐맛
(12, 3, '맑은 국물이 진짜 건강한 느낌'),
(12, 1, '강릉 가면 무조건 들리는 곳'),
-- 13. 홍대 숯불갈비 1등집
(13, 2, '불맛 대박이에요. 고기 질도 좋아요'),
(13, 4, '점심 세트 구성도 알차요'),
-- 14. 부산 밀면 맛집
(14, 1, '밀면 시원하고 쫄깃쫄깃! 여름 필수'),
(14, 3, '육수 리필도 가능해서 좋아요'),
-- 15. 이태원 터키 케밥
(15, 5, '이태원에서 이 가격에 이 퀄리티? 굿'),
(15, 2, '고기 듬뿍이고 소스도 맛있어요!'),
-- 등등
(16, 1, '줄 서서 먹을만해요'), (16, 2, '단골될 것 같아요'), (16, 5, '인생 맛집이에요!'),
(16, 1, '진짜 맛있어요!'), (17, 3, '재방문 의사 있어요'), (17, 2, '사진 찍기 좋은 곳'),
(17, 4, '분위기 최고에요'), (17, 4, '분위기 최고에요'), (17, 1, '가성비 최고네요'),
(18, 3, '또 가고 싶어요!'), (18, 2, '가성비 최고네요'), (19, 5, '웨이팅만 없으면 완벽'),
(19, 5, '인생 맛집이에요!'), (19, 3, '또 가고 싶어요!'), (19, 2, '인생 맛집이에요!'),
(20, 4, '인생 맛집이에요!'), (20, 3, '줄 서서 먹을만해요'), (20, 1, '양도 많고 맛도 굿'),
(20, 5, '또 가고 싶어요!'), (20, 4, '웨이팅만 없으면 완벽'), (21, 5, '사진 찍기 좋은 곳'),
(21, 4, '사진 찍기 좋은 곳'), (21, 4, '진짜 맛있어요!'), (21, 1, '분위기 최고에요'),
(21, 3, '양도 많고 맛도 굿'), (22, 3, '양도 많고 맛도 굿'), (23, 1, '분위기 최고에요'),
(23, 4, '인생 맛집이에요!'), (23, 2, '줄 서서 먹을만해요'), (23, 1, '분위기 최고에요'),
(24, 2, '진짜 맛있어요!'), (24, 2, '깔끔하고 정갈해요'), (24, 5, '분위기 최고에요'),
(24, 5, '또 가고 싶어요!'), (25, 1, '줄 서서 먹을만해요'), (26, 1, '분위기 최고에요'),
(26, 4, '가성비 최고네요'), (27, 2, '또 가고 싶어요!'), (27, 2, '단골될 것 같아요'),
(27, 3, '혼밥하기 좋아요'), (28, 3, '웨이팅만 없으면 완벽'), (28, 5, '재방문 의사 있어요'),
(29, 4, '혼밥하기 좋아요'), (29, 5, '깔끔하고 정갈해요'), (30, 3, '진짜 맛있어요!'),
(30, 4, '가성비 최고네요'), (30, 5, '웨이팅만 없으면 완벽'), (31, 2, '진짜 맛있어요!'),
(31, 5, '인생 맛집이에요!'), (32, 4, '또 가고 싶어요!'), (32, 1, '양도 많고 맛도 굿'),
(32, 5, '인생 맛집이에요!'), (32, 2, '사진 찍기 좋은 곳'), (33, 4, '재방문 의사 있어요'),
(33, 2, '가성비 최고네요'), (33, 4, '분위기 최고에요'), (33, 5, '진짜 맛있어요!'),
(33, 3, '혼밥하기 좋아요'), (34, 3, '인생 맛집이에요!'), (34, 2, '인생 맛집이에요!'),
(34, 1, '양도 많고 맛도 굿'), (34, 4, '혼밥하기 좋아요'), (35, 3, '웨이팅만 없으면 완벽'),
(35, 5, '양도 많고 맛도 굿'), (35, 3, '혼밥하기 좋아요');


-- 좋아요 정보
INSERT INTO likes (post_id, user_id) VALUES
(1, 2), (1, 3), (1, 4), (2, 1), (2, 3),
(2, 5), (3, 1), (3, 2), (4, 1), (4, 2),
(5, 3), (5, 4), (6, 2), (7, 5), (8, 4),
(9, 1), (9, 2), (10, 3), (11, 2), (12, 1),
(1, 3), (1, 7), (2, 1), (2, 3), (2, 5),
(2, 6), (2, 7), (3, 3), (4, 1), (4, 2),
(4, 3), (5, 3), (6, 4), (6, 6), (6, 7),
(7, 6), (8, 2), (8, 4), (8, 6), (9, 1),
(10, 1), (10, 2), (10, 3), (10, 4), (11, 1),
(11, 3), (13, 4), (14, 1), (14, 2), (14, 6),
(15, 4), (16, 1), (16, 3), (16, 4), (16, 6),
(17, 1), (17, 5), (18, 3), (18, 6), (19, 2),
(19, 4), (20, 1), (20, 2), (20, 3), (20, 6),
(21, 3), (21, 4), (22, 1), (22, 3), (22, 4),
(23, 6), (24, 6), (25, 2), (26, 1), (26, 3),
(26, 7), (27, 7), (28, 2), (28, 3), (28, 5),
(29, 2), (29, 6), (30, 2), (30, 3), (30, 7),
(31, 1), (31, 4), (31, 6), (32, 2), (32, 3),
(33, 2), (33, 4), (33, 5), (34, 1), (34, 2),
(34, 3), (34, 6), (35, 2), (35, 5), (35, 7);